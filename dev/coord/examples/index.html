<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Example · Neuroimaging.jl</title><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.039/juliamono-regular.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.13.11/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit"><a href="../../">Neuroimaging.jl</a></span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><a class="tocitem" href="../../types/">Types</a></li><li><span class="tocitem">Usage/Implementation Details</span><ul><li><a class="tocitem" href="../../usage/access/">Accessing data</a></li><li><a class="tocitem" href="../../usage/filter/">Filtering</a></li></ul></li><li><span class="tocitem">General EEG Processing</span><ul><li><a class="tocitem" href="../../eeg/eeg/">Overview</a></li><li><a class="tocitem" href="../../eeg/examples/">Example</a></li><li><a class="tocitem" href="../../eeg/functions/">API</a></li></ul></li><li><span class="tocitem">Steady State Responses (EEG)</span><ul><li><a class="tocitem" href="../../assr/assr/">Overview</a></li><li><a class="tocitem" href="../../assr/examples/">Example</a></li><li><a class="tocitem" href="../../assr/functions/">API</a></li></ul></li><li><span class="tocitem">Transient Responses (EEG)</span><ul><li><a class="tocitem" href="../../tr/transient/">Overview</a></li><li><a class="tocitem" href="../../tr/examples/">Example</a></li></ul></li><li><span class="tocitem">Coordinate Systems</span><ul><li class="is-active"><a class="tocitem" href>Example</a><ul class="internal"><li><a class="tocitem" href="#Create-a-coordinate"><span>Create a coordinate</span></a></li><li><a class="tocitem" href="#Conversion-between-coordinates"><span>Conversion between coordinates</span></a></li><li><a class="tocitem" href="#Sensors"><span>Sensors</span></a></li></ul></li></ul></li><li><span class="tocitem">Source Modelling</span><ul><li><a class="tocitem" href="../../source/examples/">Example</a></li></ul></li><li><a class="tocitem" href="../../IO/">Input/Output Support</a></li><li><a class="tocitem" href="../../api/">Low-Level API</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Coordinate Systems</a></li><li class="is-active"><a href>Example</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Example</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/rob-luke/Neuroimaging.jl/blob/master/docs/src/coord/examples.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Coordinate-Systems"><a class="docs-heading-anchor" href="#Coordinate-Systems">Coordinate Systems</a><a id="Coordinate-Systems-1"></a><a class="docs-heading-anchor-permalink" href="#Coordinate-Systems" title="Permalink"></a></h1><p>There are a wide variety of coordinate systems used in Neuroimaging. <code>Neuroimaging.jl</code> provides a coordinate data type, and several subtypes associated with specific systems. Conversion between coordinate systems is available. For a general overview of coordinate systems in neuroimaging see:</p><ul><li>https://mne.tools/dev/auto<em>tutorials/forward/20</em>source_alignment.html</li><li>https://www.fieldtriptoolbox.org/faq/coordsys/</li></ul><p>This package currently supports <code>SPM</code>, <code>BrainVision</code>, and <code>Talairach</code> coordinates and conversion. Additionally, an <code>Unknown</code> coordinate system can be used if you don&#39;t know how your locations are mapped.</p><div class="admonition is-info"><header class="admonition-header">Refactoring in progress</header><div class="admonition-body"><p>This example demonstrates the existing capabilities of the package. General improvements are planned to this package. But before changes are made, the existing features and functions will be documented. This will help to highlight was has already been implemented, and where improvements need to be made. For a rough plan of how the package is being redeveloped see the GitHub issues and <a href="https://github.com/rob-luke/Neuroimaging.jl/projects/1">project board</a>.</p></div></div><h2 id="Create-a-coordinate"><a class="docs-heading-anchor" href="#Create-a-coordinate">Create a coordinate</a><a id="Create-a-coordinate-1"></a><a class="docs-heading-anchor-permalink" href="#Create-a-coordinate" title="Permalink"></a></h2><p>We can create a coordinate point by calling the appropriate type. Internally <code>Neuroimaging.jl</code> uses SI units, so meters for these locations. But the results are displayed in the more convenient centimeter notation.</p><p>By default everything is SI units, so if you pass in a distance without specifying the unit it will be in meters.</p><pre><code class="language-julia hljs">using Neuroimaging, Unitful

SPM(0.0737, -0.0260, 0.0070)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">SPM(0.0737 m, -0.026 m, 0.007 m)</code></pre><p>However, it is clearer and less prone to error if you specify the unit at construction, and let the internals handle the conversion.</p><pre><code class="language-julia hljs">location_1 = SPM(73.7u&quot;mm&quot;, -26u&quot;mm&quot;, 7u&quot;mm&quot;)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">SPM(0.0737 m, -0.026 m, 0.007 m)</code></pre><p>Note that this position is taken from table IV from:</p><ul><li>Lancaster, Jack L., et al. &quot;Bias between MNI and Talairach coordinates analyzed using the ICBM‐152 brain template.&quot; Human brain mapping 28.11 (2007): 1194-1205.</li></ul><h2 id="Conversion-between-coordinates"><a class="docs-heading-anchor" href="#Conversion-between-coordinates">Conversion between coordinates</a><a id="Conversion-between-coordinates-1"></a><a class="docs-heading-anchor-permalink" href="#Conversion-between-coordinates" title="Permalink"></a></h2><p>To convert between different coordinate systems simply call the <code>convert</code> function with the first arguments as the desired coordinate system. The <code>show</code> function displays the passed type nicely with domain appropriate units.</p><pre><code class="language-julia hljs">show(convert(Talairach, location_1))</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">[ Info: Converted 1 coordinates to talairach space from SPM MNI
Coordinate: Talairach - (67.03628 mm, -26.95176 mm, 9.16384 mm)</code></pre><p>And we can see that the resulting value is similar to what is provided in the Lancaster 2007 article. Although not exact, there is some loss in the transformations.</p><h2 id="Sensors"><a class="docs-heading-anchor" href="#Sensors">Sensors</a><a id="Sensors-1"></a><a class="docs-heading-anchor-permalink" href="#Sensors" title="Permalink"></a></h2><p>Sensors contain location information stored as coordinate types. So if we load an EEG measurement...</p><pre><code class="language-julia hljs">using Neuroimaging, DataDeps
data_path = joinpath(
    datadep&quot;ExampleSSR&quot;,
    &quot;Neuroimaging.jl-example-data-master&quot;,
    &quot;neuroimaingSSR.bdf&quot;,
)

s = read_SSR(data_path)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">SSR measurement of 5.0 mins with 7 channels sampled at 8192.0 Hz
  Modulation frequency: NaN Hz
</code></pre><p>we can then query the sensors by calling...</p><pre><code class="language-julia hljs">sensors(s)</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">7-element Vector{Sensor}:
 Electrode(&quot;F5&quot;, Talairach(-0.06560941273964613 m, 0.039533392370485365 m, 0.023293714059226867 m), Dict{Any, Any}())
 Electrode(&quot;TP7&quot;, Talairach(-0.08554294425259022 m, -0.04529458746142005 m, -0.003140954703225086 m), Dict{Any, Any}())
 Electrode(&quot;O1&quot;, Talairach(-0.027794587461420057 m, -0.10304294425259022 m, -0.003140954703225086 m), Dict{Any, Any}())
 Electrode(&quot;F6&quot;, Talairach(0.06560941273964613 m, 0.039533392370485365 m, 0.023293714059226867 m), Dict{Any, Any}())
 Electrode(&quot;Cz&quot;, Talairach(0.0 m, -0.0175 m, 0.09 m), Dict{Any, Any}())
 Electrode(&quot;TP8&quot;, Talairach(0.08554294425259022 m, -0.04529458746142005 m, -0.003140954703225086 m), Dict{Any, Any}())
 Electrode(&quot;O2&quot;, Talairach(0.027794587461420057 m, -0.10304294425259022 m, -0.003140954703225086 m), Dict{Any, Any}())</code></pre><p>And we can see that there are 7 electrodes with standard 10-20 names. However, they do not have positions encoded by default.</p><div class="admonition is-info"><header class="admonition-header">Great first issue</header><div class="admonition-body"><p>A mapping for standard position names like 10-20 or 10-05 to coordinates would be a great improvement to the project.</p></div></div><p>We can query the coordinate positions for the electrodes. For example, to obtain the x locations for all sensors in the EEG measurement use...</p><pre><code class="language-julia hljs">x(sensors(s))</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">7-element Vector{Unitful.Quantity{Float64, 𝐋, Unitful.FreeUnits{(m,), 𝐋, nothing}}}:
  -0.06560941273964613 m
  -0.08554294425259022 m
 -0.027794587461420057 m
   0.06560941273964613 m
                   0.0 m
   0.08554294425259022 m
  0.027794587461420057 m</code></pre><p>or to get all the labels use...</p><pre><code class="language-julia hljs">labels(sensors(s))</code></pre><pre class="documenter-example-output"><code class="nohighlight hljs ansi">7-element Vector{String}:
 &quot;F5&quot;
 &quot;TP7&quot;
 &quot;O1&quot;
 &quot;F6&quot;
 &quot;Cz&quot;
 &quot;TP8&quot;
 &quot;O2&quot;</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../tr/examples/">« Example</a><a class="docs-footer-nextpage" href="../../source/examples/">Example »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.27.7 on <span class="colophon-date" title="Saturday 2 October 2021 12:58">Saturday 2 October 2021</span>. Using Julia version 1.6.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
